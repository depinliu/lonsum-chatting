const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChatFileAttachment-Dm97RerX.js","assets/index-BNwroOEy.js","assets/index-B2xumsje.css","assets/ChatImageAttachment-21XNGpVL.js","assets/male-DaZLvj6D.js","assets/ChatImageGallery-CojI_beZ.js"])))=>i.map(i=>d[i]);
import{y as U,f as z,r as w,h as p,p as T,b as E,c as r,o as s,a as t,F as D,x as S,C as H,H as V,u as a,n as d,s as i,t as g,d as B,w as F,j as f,i as v,_ as k}from"./index-BNwroOEy.js";const $=["id"],N=["src","alt"],O=["id"],R={class:"flex flex-col px-3"},j={class:"flex flex-col gap-2 py-2"},P={key:0,class:"flex flex-row items-center gap-1 text-xs italic text-zinc-500 dark:text-zinc-400"},G={class:"font-medium text-sm"},q=["innerHTML"],J=["innerHTML"],K={key:3,class:"flex flex-col gap-2"},Q=["innerHTML"],W={class:"flex flex-row gap-1 ms-auto"},X={class:"ms-auto flex flex-row items-center gap-1 h-fit"},Y={class:"text-xs font-normal text-gray-500 dark:text-gray-400"},_={__name:"ChatMessage",props:{actions:{type:Array,default:()=>[]},detail:{type:Object,default:()=>{}},showAvatar:{type:Boolean,default:!0}},setup(e){const n=U(),u=z(),b=v(()=>k(()=>import("./ChatFileAttachment-Dm97RerX.js"),__vite__mapDeps([0,1,2]))),I=v(()=>k(()=>import("./ChatImageAttachment-21XNGpVL.js"),__vite__mapDeps([3,4,1,2]))),C=v(()=>k(()=>import("./ChatImageGallery-CojI_beZ.js"),__vite__mapDeps([5,4,1,2]))),A=w(!1),x=w(null),y=o=>{x.value&&!x.value.contains(o.target)&&(A.value=!1)};p(()=>{document.addEventListener("click",y)}),T(()=>{document.removeEventListener("click",y)});const L=o=>{const l=["!text-red-500","!text-blue-500","!text-green-500","!text-yellow-500","!text-purple-500","!text-pink-500","!text-indigo-500","!text-emerald-500"],m=o.split("").reduce((c,h)=>c+h.charCodeAt(0),0);return l[m%l.length]},M=o=>{const l=document.getElementById(`chat-detail-${o}`);l&&(l.scrollIntoView({behavior:"smooth",block:"center"}),l.classList.add("bg-zinc-200","dark:bg-zinc-600","rounded-lg","p-2"),setTimeout(()=>{l.classList.remove("bg-zinc-200","dark:bg-zinc-600","rounded-lg","p-2")},500))};return(o,l)=>{const m=E("Alert");return s(),r("div",{id:`chat-detail-${e.detail.messageId}`,class:"w-full"},[t("div",{class:d(["flex gap-2 w-fit max-w-[300px] lg:max-w-[400px] items-start group",a(n).currentUser.username===e.detail.senderId?"flex-row-reverse ms-auto":"flex-row"]),ref_key:"menuContainer",ref:x},[(s(!0),r(D,null,S(a(u).data.chatDetail.participants,(c,h)=>H((s(),r("div",{key:h},[e.showAvatar&&a(u).data.chatDetail.participants.length>2&&a(n).currentUser.username!==e.detail.senderId?(s(),r("img",{key:0,src:c.avatar,alt:`avatar-${c.name}`,class:"min-w-8 w-8 h-8 rounded-full object-cover"},null,8,N)):(s(),r("div",{key:1,class:d(!e.showAvatar&&a(u).data.chatDetail.participants.length>2?"min-w-8":"min-w-2")},null,2))])),[[V,c.userId===e.detail.senderId]])),128)),t("div",{class:d(["flex flex-col",a(n).currentUser.username===e.detail.senderId?"gap-.5":"gap-1"])},[t("div",{id:`chat-bubble-${e.detail.messageId}`,class:d(["relative flex flex-col items-start group shadow",[a(n).currentUser.username===e.detail.senderId?"rounded-s-xl rounded-ee-xl  border-gray-200 bg-blue-100 dark:bg-purple-800":"rounded-e-xl rounded-es-xl  border-gray-200 bg-white dark:bg-gray-700"]])},[e.showAvatar?(s(),r("div",{key:0,class:d(["absolute -translate-y-0 text-lg z-0 -top-[7px] rotate-[90deg]",a(n).currentUser.username===e.detail.senderId?"right-[-5px]  dark:text-purple-800 text-blue-100":"left-[-5px]  dark:text-gray-700 text-white"])},l[2]||(l[2]=[t("i",{class:"fa-solid fa-play"},null,-1)]),2)):i("",!0),t("div",R,[a(u).data.chatDetail.participants.length>2&&e.showAvatar&&a(n).currentUser.username!==e.detail.senderId?(s(),r("div",{key:0,class:d(["flex flex-1 items-center gap-2 pt-1.5",{"ms-auto flex-row-reverse":a(n).currentUser.username===e.detail.senderId}])},[t("span",{class:d(["text-sm font-semibold text-gray-900 dark:text-white line-clamp-1 hover:underline cursor-pointer",L(e.detail.senderId)])},g(e.detail.senderName),3)],2)):i("",!0),t("div",j,[e.detail.isForwarded?(s(),r("div",P,l[3]||(l[3]=[t("i",{class:"fa-solid fa-share"},null,-1),t("span",null,"Forwarded",-1)]))):i("",!0),e.detail.repliedMessage.id?(s(),r("div",{key:1,onClick:l[0]||(l[0]=c=>M(e.detail.repliedMessage.id)),class:"flex-1 cursor-pointer"},[B(m,{class:"rounded-lg"},{default:F(()=>[t("h5",G,g(e.detail.repliedMessage.senderName),1),t("div",null,[t("p",{class:"line-clamp-1 text-sm text-zinc-500 dark:text-zinc-200 font-normal",innerHTML:e.detail.repliedMessage.content},null,8,q)])]),_:1})])):i("",!0),e.detail.attachment?(s(),r("div",K,[t("p",{class:"text-sm font-normal text-gray-900 dark:text-white",innerHTML:e.detail.attachment.caption},null,8,Q),e.detail.attachment?(s(),f(a(b),{key:0})):i("",!0),e.detail.attachment?(s(),f(a(I),{key:1})):i("",!0),e.detail.attachment?(s(),f(a(C),{key:2})):i("",!0)])):(s(),r("p",{key:2,class:"text-sm font-normal text-gray-900 dark:text-white",innerHTML:e.detail.content},null,8,J))]),t("div",{class:d(["flex flex-row items-center justify-between gap-6",a(n).currentUser.username===e.detail.senderId?"pb-1":"pt-1 pb-2"])},[t("div",{class:d(["flex-none flex-row gap-2 flex",{"text-end":a(n).currentUser.username===e.detail.senderId}])},[t("div",{onClick:l[1]||(l[1]=c=>a(u).clickReplyChat(e.detail)),class:d(["text-xs cursor-pointer hover:underline",a(n).currentUser.username===e.detail.senderId?"text-blue-500 dark:text-orange-300":"text-blue-600 dark:text-orange-300"])}," Reply ",2),t("div",{class:d(["text-xs cursor-pointer hover:underline",a(n).currentUser.username===e.detail.senderId?"text-purple-500 dark:text-blue-200":"text-purple-600 dark:text-blue-200"])}," Forward ",2)],2),t("div",W,[t("div",X,[t("span",Y,g(e.detail.time),1),a(n).currentUser.username===e.detail.senderId?(s(),r("i",{key:0,class:d(["bi",e.detail.status==="read"?"bi-check-all text-blue-500":e.detail.status==="delivered"?"bi-check-all text-zinc-500":"bi-check text-zinc-500"])},null,2)):i("",!0)])])],2)])],10,O)],2)],2)],8,$)}}};export{_ as default};

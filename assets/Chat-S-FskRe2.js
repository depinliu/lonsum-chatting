const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SendIcon-DzZfmyvM.js","assets/index-ClDkpKpY.js","assets/index-DUjUTpHk.css","assets/InputWrapperResizer-D43Z5-fs.js","assets/ButtonScrollBottom-Z0Y2yBKc.js","assets/QuillEditor-D9MTgFpw.js","assets/QuillEditor-CMkM3UpW.css","assets/Emoji-Ch7RRl7H.js","assets/Attachments-Lrbcx7Xf.js","assets/AttachmentsPreview-BfQHiGZ2.js","assets/ChatMessage-CHVcdlXU.js","assets/HeaderContent-BRiDo4_s.js"])))=>i.map(i=>d[i]);
import{e as j,k as F,f as N,g as $,l as U,m as W,r as q,h as J,p as Q,q as Y,b as S,c as n,o,d as r,a as s,s as v,u as e,i as l,j as x,F as w,v as E,t as z,x as C,n as Z,w as k,_ as i}from"./index-ClDkpKpY.js";const G=y=>{const u=new Date(y),f=new Date;if(u.toDateString()===f.toDateString())return u.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1}).replace(".",":");const _=new Date;return _.setDate(_.getDate()-1),u.toDateString()===_.toDateString()?"Yesterday":u.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"})},K="/assets/thumb-2-h8uMZaVl.gif",X="/assets/i-like-food-CuvPJC7N.svg",ee="/assets/i-like-food-dark-DO4DPwSI.svg",te={class:"flex flex-col h-screen w-full relative"},oe={key:1},se={class:"bg-zinc-200 px-2 py-1 rounded text-zinc-500 w-fit text-xs mx-auto sticky top-0 dark:bg-zinc-700 dark:text-zinc-200"},ae={class:"relative flex flex-col gap-2 h-full"},ne={key:0,class:"flex flex-row items-center gap-2"},re={class:"flex-1"},le={class:"font-medium text-sm"},ie={key:0},ce=["src"],de={key:1},ue=["innerHTML"],_e={class:"flex flex-row gap-1.5 items-center"},me={class:"flex flex-row items-end gap-2 h-full"},fe={class:"flex-1 h-full"},he={__name:"Chat",setup(y){const u=l(()=>i(()=>import("./SendIcon-DzZfmyvM.js"),__vite__mapDeps([0,1,2]))),f=l(()=>i(()=>import("./InputWrapperResizer-D43Z5-fs.js"),__vite__mapDeps([3,1,2]))),_=l(()=>i(()=>import("./ButtonScrollBottom-Z0Y2yBKc.js"),__vite__mapDeps([4,1,2]))),T=l(()=>i(()=>import("./QuillEditor-D9MTgFpw.js"),__vite__mapDeps([5,1,2,6]))),P=l(()=>i(()=>import("./Emoji-Ch7RRl7H.js"),__vite__mapDeps([7,1,2]))),A=l(()=>i(()=>import("./Attachments-Lrbcx7Xf.js"),__vite__mapDeps([8,1,2]))),I=l(()=>i(()=>import("./AttachmentsPreview-BfQHiGZ2.js"),__vite__mapDeps([9,1,2]))),L=l(()=>i(()=>import("./ChatMessage-CHVcdlXU.js"),__vite__mapDeps([10,1,2]))),V=l(()=>i(()=>import("./HeaderContent-BRiDo4_s.js"),__vite__mapDeps([11,1,2]))),R=j();F();const t=N(),B=$(),O=U(),M=W(()=>O.currentTheme==="dark"?ee:X),c=q(null),h=()=>{if(!c.value)return;const{scrollTop:m,scrollHeight:a,clientHeight:p}=c.value;t.isAtBottom=a-m<=p+100};return J(async()=>{setTimeout(()=>{c.value&&(c.value.addEventListener("scroll",h),h())},2e3)}),Q(()=>{c.value&&c.value.removeEventListener("scroll",h)}),Y(()=>R.params.chatId,async m=>{m&&await t.fetchChatDetail(m)},{immediate:!0}),(m,a)=>{const p=S("Alert"),D=S("Button");return o(),n("div",te,[r(e(V),{class:"absolute top-0 left-0 right-0 z-10 h-[64px]"}),s("div",{id:"chatContent",ref_key:"chatContent",ref:c,class:Z(["flex-1 overflow-auto scroll-thin relative bg-zinc-100 dark:bg-zinc-900 mt-[64px]",{"p-4":e(t).form.files.length===0,"p-0":e(t).form.files.length>0}]),style:C({backgroundImage:`url(${M.value})`,backgroundSize:"120px",backgroundRepeat:"repeat"})},[e(t).form.files.length>0?(o(),x(e(I),{key:0})):(o(),n("div",oe,[(o(!0),n(w,null,E(e(t).data.chatDetail.messages,(d,H)=>(o(),n("div",{key:H,class:"flex flex-col space-y-2"},[s("div",se,z(e(G)(d.date)),1),(o(!0),n(w,null,E(d.data,(b,g)=>(o(),x(e(L),{key:g,detail:b,showAvatar:g===0||d.data[g-1].senderId!==b.senderId,actions:[{label:"Reply",handler:()=>console.log("Reply clicked")},{label:"Forward",handler:()=>console.log("Forward clicked")}]},null,8,["detail","showAvatar","actions"]))),128))]))),128))])),e(t).form.files.length===0?(o(),x(e(_),{key:2})):v("",!0)],6),e(t).form.files.length===0?(o(),n("div",{key:0,class:"relative p-4 bg-white shadow-md dark:bg-zinc-800",style:C({minHeight:`${e(B).inputWrapperHeight}px`})},[s("div",ae,[e(t).data.replyData?(o(),n("div",ne,[s("div",re,[r(p,{class:"rounded-lg"},{default:k(()=>[s("h5",le,z(e(t).data.replyData.senderName),1),e(t).data.replyData.content==="/thumb/"?(o(),n("div",ie,[s("img",{src:e(K),alt:"thumb",class:"w-[20px]"},null,8,ce)])):(o(),n("div",de,[s("p",{class:"line-clamp-1 text-sm text-zinc-500 dark:text-zinc-200 font-normal",innerHTML:e(t).data.replyData.content},null,8,ue)]))]),_:1})]),r(D,{onClick:a[0]||(a[0]=d=>e(t).data.replyData=null),class:"w-10 h-10 !rounded-full text-zinc-500 hover:!bg-zinc-100 flex items-center justify-center mb-1 dark:hover:!text-zinc-300 dark:hover:!bg-zinc-600"},{default:k(()=>a[3]||(a[3]=[s("i",{class:"fa-solid fa-xmark text-xl"},null,-1)])),_:1})])):v("",!0),s("div",_e,[r(e(P)),r(e(A))]),s("div",me,[s("div",fe,[r(e(T),{modelValue:e(t).form.chat,"onUpdate:modelValue":a[1]||(a[1]=d=>e(t).form.chat=d),onSendMessage:e(t).clickSendButton},null,8,["modelValue","onSendMessage"])]),r(D,{onClick:a[2]||(a[2]=d=>e(t).clickSendButton(e(t).form.chat)),class:"w-10 h-10 !rounded-full hover:!bg-green-100 flex items-center justify-center mb-1"},{default:k(()=>[r(e(u))]),_:1})])]),r(e(f))],4)):v("",!0)])}}},ge=Object.freeze(Object.defineProperty({__proto__:null,default:he},Symbol.toStringTag,{value:"Module"}));export{ge as C,K as T};

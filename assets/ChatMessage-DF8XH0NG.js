const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChatFileAttachment-CWQv9Y0N.js","assets/index-5SBp6GNj.js","assets/index-DV9UrBT4.css","assets/ChatImageAttachment-COP5-CIy.js","assets/male-DaZLvj6D.js","assets/ChatImageGallery-Bsh4RF9m.js"])))=>i.map(i=>d[i]);
import{y as T,f as z,r as w,h as E,p as U,b as p,c as n,o as l,a as t,F as D,s as S,C as H,H as V,u as s,n as r,x as d,t as f,d as B,w as F,j as g,i as v,_ as y}from"./index-5SBp6GNj.js";import{T as $}from"./Chat-tHgT7huT.js";const N=["id"],O=["src","alt"],R=["id"],j={class:"flex flex-col"},P={key:0,class:"flex-none"},G=["src"],q={key:1,class:"flex flex-col gap-2"},J={key:0,class:"flex flex-row items-center gap-1 text-xs italic text-zinc-500 dark:text-zinc-400"},K={class:"font-medium text-sm"},Q=["innerHTML"],W=["innerHTML"],X={key:3,class:"flex flex-col gap-2"},Y=["innerHTML"],Z={class:"flex flex-row items-center justify-between gap-6 mb-2.5"},_={class:"flex flex-row gap-1 ms-auto"},ee={class:"ms-auto flex flex-row items-center gap-1 h-fit"},te={class:"text-xs font-normal text-gray-500 dark:text-gray-400"},le={__name:"ChatMessage",props:{actions:{type:Array,default:()=>[]},detail:{type:Object,default:()=>{}},showAvatar:{type:Boolean,default:!0}},setup(e){const i=T(),u=z(),b=v(()=>y(()=>import("./ChatFileAttachment-CWQv9Y0N.js"),__vite__mapDeps([0,1,2]))),I=v(()=>y(()=>import("./ChatImageAttachment-COP5-CIy.js"),__vite__mapDeps([3,4,1,2]))),C=v(()=>y(()=>import("./ChatImageGallery-Bsh4RF9m.js"),__vite__mapDeps([5,4,1,2]))),A=w(!1),m=w(null),k=c=>{m.value&&!m.value.contains(c.target)&&(A.value=!1)};E(()=>{document.addEventListener("click",k)}),U(()=>{document.removeEventListener("click",k)});const L=c=>{const a=["!text-red-500","!text-blue-500","!text-green-500","!text-yellow-500","!text-purple-500","!text-pink-500","!text-indigo-500","!text-emerald-500"],x=c.split("").reduce((o,h)=>o+h.charCodeAt(0),0);return a[x%a.length]},M=c=>{const a=document.getElementById(`chat-detail-${c}`);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a.classList.add("bg-zinc-200","dark:bg-zinc-600","rounded-lg","p-2"),setTimeout(()=>{a.classList.remove("bg-zinc-200","dark:bg-zinc-600","rounded-lg","p-2")},500))};return(c,a)=>{const x=p("Alert");return l(),n("div",{id:`chat-detail-${e.detail.messageId}`,class:r(["w-full",e.showAvatar?"mt-4":"mt-0"])},[t("div",{class:r(["flex gap-2 w-fit max-w-[300px] lg:max-w-[400px] items-start group",s(i).currentUser.username===e.detail.senderId?"flex-row-reverse ms-auto":"flex-row"]),ref_key:"menuContainer",ref:m},[(l(!0),n(D,null,S(s(u).data.chatDetail.participants,(o,h)=>H((l(),n("div",{key:h},[e.showAvatar&&s(u).data.chatDetail.participants.length>2&&s(i).currentUser.username!==e.detail.senderId?(l(),n("img",{key:0,src:o.avatar,alt:`avatar-${o.name}`,class:"min-w-8 w-8 h-8 rounded-full object-cover"},null,8,O)):(l(),n("div",{key:1,class:r(!e.showAvatar&&s(u).data.chatDetail.participants.length>2?"min-w-8":"min-w-2")},null,2))])),[[V,o.userId===e.detail.senderId]])),128)),t("div",{class:r(["flex flex-col",s(i).currentUser.username===e.detail.senderId?"gap-.5":"gap-1"])},[s(u).data.chatDetail.participants.length>2&&e.showAvatar&&s(i).currentUser.username!==e.detail.senderId?(l(),n("div",{key:0,class:r(["flex flex-1 items-center gap-2",{"ms-auto flex-row-reverse":s(i).currentUser.username===e.detail.senderId}])},[t("span",{class:r(["text-sm font-semibold text-gray-900 dark:text-white line-clamp-1 hover:underline cursor-pointer",L(e.detail.senderId)])},f(e.detail.senderName),3)],2)):d("",!0),t("div",{id:`chat-bubble-${e.detail.messageId}`,class:r(["relative flex flex-col items-start px-4 group shadow",[s(i).currentUser.username===e.detail.senderId?"rounded-s-xl rounded-ee-xl py-3 border-gray-200 bg-blue-100 dark:bg-purple-600":"rounded-e-xl rounded-es-xl py-2 border-gray-200 bg-white dark:bg-gray-700"]])},[e.showAvatar?(l(),n("div",{key:0,class:r(["absolute -translate-y-0 text-lg z-0 -top-[7px] rotate-[90deg]",s(i).currentUser.username===e.detail.senderId?"right-[-5px]  dark:text-purple-600 text-blue-100":"left-[-5px]  dark:text-gray-700 text-white"])},a[2]||(a[2]=[t("i",{class:"fa-solid fa-play"},null,-1)]),2)):d("",!0),t("div",j,[e.detail.content==="/thumb/"?(l(),n("div",P,[t("img",{src:s($),alt:"thumb"},null,8,G)])):(l(),n("div",q,[e.detail.isForwarded?(l(),n("div",J,a[3]||(a[3]=[t("i",{class:"fa-solid fa-share"},null,-1),t("span",null,"Forwarded",-1)]))):d("",!0),e.detail.repliedMessage.id?(l(),n("div",{key:1,onClick:a[0]||(a[0]=o=>M(e.detail.repliedMessage.id)),class:"flex-1 cursor-pointer"},[B(x,{class:"rounded-lg"},{default:F(()=>[t("h5",K,f(e.detail.repliedMessage.senderName),1),t("div",null,[t("p",{class:"line-clamp-1 text-sm text-zinc-500 dark:text-zinc-200 font-normal",innerHTML:e.detail.repliedMessage.content},null,8,Q)])]),_:1})])):d("",!0),e.detail.attachment?(l(),n("div",X,[t("p",{class:"text-sm font-normal text-gray-900 dark:text-white",innerHTML:e.detail.attachment.caption},null,8,Y),e.detail.attachment?(l(),g(s(b),{key:0})):d("",!0),e.detail.attachment?(l(),g(s(I),{key:1})):d("",!0),e.detail.attachment?(l(),g(s(C),{key:2})):d("",!0)])):(l(),n("p",{key:2,class:"text-sm font-normal text-gray-900 dark:text-white",innerHTML:e.detail.content},null,8,W))]))])],10,R),t("div",Z,[t("div",{class:r(["flex-none flex-row gap-2 flex",{"text-end":s(i).currentUser.username===e.detail.senderId}])},[t("div",{onClick:a[1]||(a[1]=o=>s(u).clickReplyChat(e.detail)),class:"text-xs cursor-pointer hover:underline text-blue-500"}," Reply "),a[4]||(a[4]=t("div",{class:"text-xs cursor-pointer hover:underline text-purple-500"}," Forward ",-1))],2),t("div",_,[t("div",ee,[t("span",te,f(e.detail.time),1),s(i).currentUser.username===e.detail.senderId?(l(),n("i",{key:0,class:r(["bi",e.detail.status==="read"?"bi-check-all text-blue-500":e.detail.status==="delivered"?"bi-check-all text-zinc-500":"bi-check text-zinc-500"])},null,2)):d("",!0)])])])],2)],2)],10,N)}}};export{le as default};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DropDown-Da6rLa1n.js","assets/index-BfhX4yRr.js","assets/index-B2xumsje.css","assets/Avatar-BynDdxc2.js"])))=>i.map(i=>d[i]);
import{S as I,f as S,m as d,r as g,h as M,p as N,b as L,j as E,o as n,w as v,a,d as p,u as m,i as x,t as c,c as o,s as u,n as j,z as T,B as V,R as A,_ as k}from"./index-BfhX4yRr.js";const B={class:"relative"},G={class:"flex-1 flex flex-col"},P={class:"flex flex-row justify-between"},O={class:"font-medium text-md line-clamp-1 text-zinc-700 dark:text-zinc-200"},R={class:"text-zinc-500 dark:text-zinc-400"},U={class:"flex flex-row items-center justify-between gap-2"},F={class:"flex-1 flex flex-row gap-.5 items-center"},H={class:"text-sm text-zinc-500 line-clamp-1 dark:text-zinc-400"},Y={key:0,class:"text-primary font-medium"},$={key:0},q={key:1},J={key:1},K={key:0,class:"font-medium"},Q={class:"flex flex-row gap-1 items-center"},W={key:0,class:"flex-none"},X={class:"flex flex-row items-center justify-center bg-green-200 text-primary font-bold w-fit min-w-6 h-6 rounded-full text-xs px-1"},Z={__name:"ChatItem",props:{item:Object},setup(e){const y=x(()=>k(()=>import("./DropDown-Da6rLa1n.js"),__vite__mapDeps([0,1,2]))),D=x(()=>k(()=>import("./Avatar-BynDdxc2.js"),__vite__mapDeps([3,1,2]))),r=S(),s=e,b=d(()=>{const t=s.item.participants.find(i=>i.userId===s.item.typing);return t?t.name:"Someone"}),w=d(()=>{const t=new Date(s.item.lastMessage.timestamp),i=new Date;if(t.toDateString()===i.toDateString())return t.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1}).replace(".",":");const l=new Date;return l.setDate(l.getDate()-1),t.toDateString()===l.toDateString()?"Yesterday":t.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"})}),_=g(null),f=g([{label:"Pin",value:"pin",icon:"fa-solid fa-thumbtack",color:null},{label:"Delete Chat",value:"delete",icon:"fa-solid fa-trash-can",color:"text-red-500"},{label:"Leave Group",value:"leave",icon:"fa-solid fa-trash-can",color:"text-red-500"}]),z=d(()=>s.item.participants.length===2?f.value.filter(t=>t.value!=="leave"):f.value.filter(t=>t.value!=="delete")),C=t=>{switch(event.preventDefault(),t.value){case"pin":r.clickHeaderContent();break;case"leave":r.clickLeaveGroup(s.item.chatId,s.item.groupName??s.item.lastMessage.senderName);break;case"delete":r.clickDeleteChat(s.item.chatId,s.item.groupName??s.item.lastMessage.senderName);break}};M(()=>{document.addEventListener("click",h)}),N(()=>{document.removeEventListener("click",h)});const h=t=>{t.target.closest(".dropdown-container")||(_.value=null)};return(t,i)=>{const l=L("router-link");return n(),E(l,{to:{path:`/chat/${e.item.chatId}`},class:"flex flex-row items-center py-2 px-4 hover:bg-zinc-100 cursor-pointer gap-2 group dark:hover:bg-zinc-700 group"},{default:v(()=>[a("div",B,[p(m(D),{src:e.item.chatAvatar,name:e.item.chatName,status:"online",isGroup:e.item.participants.length>2,size:38},null,8,["src","name","isGroup"])]),a("div",G,[a("div",P,[a("h6",O,c(e.item.chatName),1),a("small",R,c(w.value),1)]),a("div",U,[a("div",F,[!e.item.typing&&e.item.participants.length===2&&(e.item.lastMessage.status==="read"||e.item.lastMessage.status==="delivered")?(n(),o("i",{key:0,class:j(["bi text-lg",e.item.lastMessage.status==="read"?"bi-check-all text-blue-500":e.item.lastMessage.status==="delivered"?"bi-check-all text-zinc-500":"bi-check text-zinc-500"])},null,2)):u("",!0),a("p",H,[e.item.typing?(n(),o("span",Y,[e.item.participants.length>2?(n(),o("span",$,c(b.value)+" is typing... ",1)):(n(),o("span",q," typing... "))])):(n(),o("span",J,[e.item.participants.length>2?(n(),o("span",K,c(e.item.lastMessage.senderName)+": ",1)):u("",!0),T(" "+c(e.item.lastMessage.content),1)]))])]),a("div",Q,[e.item.unreadCount>0?(n(),o("div",W,[a("div",X,c(m(V)(e.item.unreadCount)),1)])):u("",!0),a("div",{onClick:i[0]||(i[0]=A(()=>{},["stop","prevent"]))},[p(m(y),{label:"Menu",items:z.value,position:"end",onSelect:C},{label:v(()=>i[1]||(i[1]=[a("div",{class:"min-w-6 h-6 rounded-full hover:bg-zinc-300 dark:hover:bg-zinc-600 flex items-center justify-center cursor-pointer"},[a("i",{class:"fa-solid fa-ellipsis-vertical text-lg text-zinc-500 dark:text-zinc-400 cursor-pointer hover:scale-90"})],-1)])),_:1},8,["items"])])])])])]),_:1},8,["to"])}}},te=I(Z,[["__scopeId","data-v-8496b164"]]);export{te as default};

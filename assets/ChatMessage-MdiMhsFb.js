const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ChatFileAttachment-CzvWAY0p.js","assets/index-pcgnHJvM.js","assets/index-CtX3bogN.css","assets/ChatImageAttachment-DUh7Vzmm.js","assets/male-DaZLvj6D.js","assets/ChatImageGallery-CvZUTuCF.js"])))=>i.map(i=>d[i]);
import{y as p,f as L,r as y,h as M,p as U,b as T,c as s,o as r,s as c,a as l,u as t,n,F as E,x as D,C as $,H as F,t as h,d as H,w as V,j as f,i as v,_ as k}from"./index-pcgnHJvM.js";const B=["id"],j={key:0,class:"px-4"},N={key:0,class:"fa-solid fa-check"},O=["src","alt"],R=["id"],P={class:"flex flex-col"},G={class:"flex flex-col gap-2 py-2 px-3 pb-4"},q={key:0,class:"flex flex-row items-center gap-1 text-xs italic text-zinc-500 dark:text-zinc-400"},J={class:"font-medium text-sm"},K=["innerHTML"],Q=["innerHTML"],W={key:3,class:"flex flex-col gap-2"},X=["innerHTML"],Y={class:"flex flex-row gap-1 ms-auto"},Z={class:"ms-auto flex flex-row items-center gap-1 h-fit"},_={class:"text-xs font-normal text-gray-500 dark:text-gray-400"},te={__name:"ChatMessage",props:{actions:{type:Array,default:()=>[]},detail:{type:Object,default:()=>{}},showAvatar:{type:Boolean,default:!0}},setup(e){const i=p(),d=L(),w=v(()=>k(()=>import("./ChatFileAttachment-CzvWAY0p.js"),__vite__mapDeps([0,1,2]))),I=v(()=>k(()=>import("./ChatImageAttachment-DUh7Vzmm.js"),__vite__mapDeps([3,4,1,2]))),C=v(()=>k(()=>import("./ChatImageGallery-CvZUTuCF.js"),__vite__mapDeps([5,4,1,2]))),z=y(!1),x=y(null),b=u=>{x.value&&!x.value.contains(u.target)&&(z.value=!1)};M(()=>{document.addEventListener("click",b)}),U(()=>{document.removeEventListener("click",b)});const S=u=>{const a=["!text-red-500","!text-blue-500","!text-green-500","!text-yellow-500","!text-purple-500","!text-pink-500","!text-indigo-500","!text-emerald-500"],m=u.split("").reduce((o,g)=>o+g.charCodeAt(0),0);return a[m%a.length]},A=u=>{const a=document.getElementById(`chat-detail-${u}`);a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),a.classList.add("bg-zinc-200","dark:bg-zinc-600","rounded-lg","p-2"),setTimeout(()=>{a.classList.remove("bg-zinc-200","dark:bg-zinc-600","rounded-lg","p-2")},500))};return(u,a)=>{const m=T("Alert");return r(),s("div",{onClick:a[3]||(a[3]=o=>t(d).isSelected?e.detail.isSelected=!e.detail.isSelected:null),id:`chat-detail-${e.detail.messageId}`,class:n(["w-full flex flex-row gap-8 items-center !bg-opacity-50 hover:!bg-opacity-50",{"px-4":t(d).form.files.length===0,"px-0":t(d).form.files.length>0,"hover:bg-zinc-200 cursor-pointer dark:hover:bg-zinc-600":t(d).isSelected,"bg-zinc-200 dark:bg-zinc-600":e.detail.isSelected}])},[t(d).isSelected?(r(),s("div",j,[l("div",{class:n(["min-w-5 min-h-5 border-2 flex items-center justify-center",e.detail.isSelected?"border-green-700 dark:border-green-400 bg-primary text-white":"border-zinc-600 dark:border-zinc-500 bg-white dark:bg-zinc-800 text-white"])},[e.detail.isSelected?(r(),s("i",N)):c("",!0)],2)])):c("",!0),l("div",{class:n(["flex gap-2 w-fit max-w-[300px] lg:max-w-[400px] items-start group",t(i).currentUser.username===e.detail.senderId?"flex-row-reverse ms-auto":"flex-row"]),ref_key:"menuContainer",ref:x},[(r(!0),s(E,null,D(t(d).data.chatDetail.participants,(o,g)=>$((r(),s("div",{key:g},[e.showAvatar&&t(d).data.chatDetail.participants.length>2&&t(i).currentUser.username!==e.detail.senderId?(r(),s("img",{key:0,src:o.avatar,alt:`avatar-${o.name}`,class:"min-w-8 w-8 h-8 rounded-full object-cover"},null,8,O)):(r(),s("div",{key:1,class:n(!e.showAvatar&&t(d).data.chatDetail.participants.length>2?"min-w-8":"min-w-2")},null,2))])),[[F,o.userId===e.detail.senderId]])),128)),l("div",{class:n(["flex flex-col",t(i).currentUser.username===e.detail.senderId?"gap-.5":"gap-1"])},[l("div",{id:`chat-bubble-${e.detail.messageId}`,class:n(["relative flex flex-col items-start group shadow",[t(i).currentUser.username===e.detail.senderId?"rounded-s-xl rounded-ee-xl  border-gray-200 bg-blue-100 dark:bg-purple-800":"rounded-e-xl rounded-es-xl  border-gray-200 bg-white dark:bg-gray-700"]])},[e.showAvatar?(r(),s("div",{key:0,class:n(["absolute -translate-y-0 text-lg z-0 -top-[7px] rotate-[90deg]",t(i).currentUser.username===e.detail.senderId?"right-[-5px]  dark:text-purple-800 text-blue-100":"left-[-5px]  dark:text-gray-700 text-white"])},a[4]||(a[4]=[l("i",{class:"fa-solid fa-play"},null,-1)]),2)):c("",!0),l("div",P,[t(d).data.chatDetail.participants.length>2&&e.showAvatar&&t(i).currentUser.username!==e.detail.senderId?(r(),s("div",{key:0,class:n(["flex flex-1 items-center gap-2 pt-1.5 px-3",{"ms-auto flex-row-reverse":t(i).currentUser.username===e.detail.senderId}])},[l("span",{class:n(["text-sm font-semibold text-gray-900 dark:text-white line-clamp-1 hover:underline cursor-pointer",S(e.detail.senderId)])},h(e.detail.senderName),3)],2)):c("",!0),l("div",G,[e.detail.isForwarded?(r(),s("div",q,a[5]||(a[5]=[l("i",{class:"fa-solid fa-share"},null,-1),l("span",null,"Forwarded",-1)]))):c("",!0),e.detail.repliedMessage.id?(r(),s("div",{key:1,onClick:a[0]||(a[0]=o=>A(e.detail.repliedMessage.id)),class:"flex-1 cursor-pointer"},[H(m,{class:"rounded-lg"},{default:V(()=>[l("h5",J,h(e.detail.repliedMessage.senderName),1),l("div",null,[l("p",{class:"line-clamp-1 text-sm text-zinc-500 dark:text-zinc-200 font-normal",innerHTML:e.detail.repliedMessage.content},null,8,K)])]),_:1})])):c("",!0),e.detail.attachment?(r(),s("div",W,[l("p",{class:"text-sm font-normal text-gray-900 dark:text-white",innerHTML:e.detail.attachment.caption},null,8,X),e.detail.attachment?(r(),f(t(w),{key:0})):c("",!0),e.detail.attachment?(r(),f(t(I),{key:1})):c("",!0),e.detail.attachment?(r(),f(t(C),{key:2})):c("",!0)])):(r(),s("p",{key:2,class:"text-sm font-normal text-gray-900 dark:text-white",innerHTML:e.detail.content},null,8,Q))]),t(d).isSelected?c("",!0):(r(),s("div",{key:1,class:n(["flex flex-row items-center justify-between gap-6 bg-zinc-50 dark:bg-gray-800 rounded-b-xl px-3",t(i).currentUser.username===e.detail.senderId?"pb-1 !bg-blue-50 dark:!bg-purple-900":"pt-1 pb-2"])},[l("div",{class:n(["flex-none flex-row gap-2 flex",{"text-end":t(i).currentUser.username===e.detail.senderId}])},[l("div",{onClick:a[1]||(a[1]=o=>t(d).clickReplyChat(e.detail)),class:n(["text-xs cursor-pointer hover:underline",t(i).currentUser.username===e.detail.senderId?"text-blue-500 dark:text-orange-300":"text-blue-600 dark:text-orange-300"])}," Reply ",2),l("div",{onClick:a[2]||(a[2]=o=>t(d).clickForwardChat()),class:n(["text-xs cursor-pointer hover:underline",t(i).currentUser.username===e.detail.senderId?"text-purple-500 dark:text-blue-200":"text-purple-600 dark:text-blue-200"])}," Forward ",2)],2),l("div",Y,[l("div",Z,[l("span",_,h(e.detail.time),1),t(i).currentUser.username===e.detail.senderId?(r(),s("i",{key:0,class:n(["bi",e.detail.status==="read"?"bi-check-all text-blue-500":e.detail.status==="delivered"?"bi-check-all text-zinc-500":"bi-check text-zinc-500"])},null,2)):c("",!0)])])],2))])],10,R)],2)],2)],10,B)}}};export{te as default};

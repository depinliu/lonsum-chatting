const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ContactInformation-zeF_wjeM.js","assets/index-pcgnHJvM.js","assets/index-CtX3bogN.css","assets/InputWrapperResizer-BTGxEBqE.js","assets/ButtonCancelSelectedChat-DYXrWABY.js","assets/ButtonScrollBottom-CBa1XQyh.js","assets/QuillEditor-CRLTxMfP.js","assets/QuillEditor-CMkM3UpW.css","assets/Emoji-Bm-Wpsvn.js","assets/Attachments-DtKxKHU_.js","assets/AttachmentsPreview-DgH8LzI9.js","assets/ChatMessage-MdiMhsFb.js","assets/HeaderContent-DDuuOKRP.js"])))=>i.map(i=>d[i]);
import{e as $,k as j,f as U,g as W,l as q,m as J,r as Q,h as Y,p as G,q as K,b as S,c,o as a,a as s,d as n,s as g,u as e,i as r,v as E,j as D,F as C,x as I,t as b,n as X,w as p,_ as l}from"./index-pcgnHJvM.js";const Z=w=>{const u=new Date(w),h=new Date;if(u.toDateString()===h.toDateString())return u.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1}).replace(".",":");const _=new Date;return _.setDate(_.getDate()-1),u.toDateString()===_.toDateString()?"Yesterday":u.toLocaleDateString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric"})},ee="/assets/i-like-food-CuvPJC7N.svg",te="/assets/i-like-food-dark-DO4DPwSI.svg",oe={class:"flex flex-row"},se={class:"flex-1 flex flex-col h-screen relative"},ae={key:1},ne={class:"bg-zinc-200 px-2 py-1 rounded text-zinc-500 w-fit text-xs mx-auto lg:sticky lg:top-0 dark:bg-zinc-700 dark:text-zinc-200 lg:z-20 mt-8"},re={class:"relative flex flex-col gap-2 h-full"},le={key:0,class:"flex flex-row items-center gap-2"},ie={class:"flex-1"},ce={class:"font-medium text-sm"},de=["innerHTML"],ue={class:"flex flex-row gap-1.5 items-center"},_e={class:"flex flex-row items-end gap-2 h-full"},me={class:"flex-1 h-full"},fe={key:1,class:"flex flex-row items-center gap-4 p-4 bg-white border-t dark:border-t-zinc-700 dark:bg-zinc-800"},ge={class:"text-zinc-500 dark:text-zinc-400"},he={__name:"Chat",setup(w){const u=r(()=>l(()=>import("./ContactInformation-zeF_wjeM.js"),__vite__mapDeps([0,1,2]))),h=r(()=>l(()=>import("./InputWrapperResizer-BTGxEBqE.js"),__vite__mapDeps([3,1,2]))),_=r(()=>l(()=>import("./ButtonCancelSelectedChat-DYXrWABY.js"),__vite__mapDeps([4,1,2]))),A=r(()=>l(()=>import("./ButtonScrollBottom-CBa1XQyh.js"),__vite__mapDeps([5,1,2]))),P=r(()=>l(()=>import("./QuillEditor-CRLTxMfP.js"),__vite__mapDeps([6,1,2,7]))),L=r(()=>l(()=>import("./Emoji-Bm-Wpsvn.js"),__vite__mapDeps([8,1,2]))),T=r(()=>l(()=>import("./Attachments-DtKxKHU_.js"),__vite__mapDeps([9,1,2]))),R=r(()=>l(()=>import("./AttachmentsPreview-DgH8LzI9.js"),__vite__mapDeps([10,1,2]))),V=r(()=>l(()=>import("./ChatMessage-MdiMhsFb.js"),__vite__mapDeps([11,1,2]))),B=r(()=>l(()=>import("./HeaderContent-DDuuOKRP.js"),__vite__mapDeps([12,1,2]))),O=$();j();const t=U(),H=W(),F=q(),M=J(()=>F.currentTheme==="dark"?te:ee),d=Q(null),v=()=>{if(!d.value)return;const{scrollTop:m,scrollHeight:o,clientHeight:x}=d.value;t.isAtBottom=o-m<=x+100};return Y(async()=>{setTimeout(()=>{d.value&&(d.value.addEventListener("scroll",v),v())},2e3)}),G(()=>{d.value&&d.value.removeEventListener("scroll",v)}),K(()=>O.params.chatId,async m=>{m&&await t.fetchChatDetail(m)},{immediate:!0}),(m,o)=>{var z;const x=S("Alert"),k=S("Button");return a(),c("div",oe,[s("div",se,[n(e(B),{class:"absolute top-0 left-0 right-0 z-10 h-[64px]"}),s("div",{id:"chatContent",ref_key:"chatContent",ref:d,class:"flex-1 overflow-auto scroll-thin relative bg-zinc-100 dark:bg-zinc-900 mt-[64px] py-4",style:E({backgroundImage:`url(${M.value})`,backgroundSize:"120px",backgroundRepeat:"repeat"})},[e(t).form.files.length>0?(a(),D(e(R),{key:0})):(a(),c("div",ae,[(a(!0),c(C,null,I(e(t).data.chatDetail.messages,(i,N)=>(a(),c("div",{key:N,class:"flex flex-col"},[s("div",ne,b(e(Z)(i.date)),1),(a(!0),c(C,null,I(i.data,(y,f)=>(a(),D(e(V),{key:f,detail:y,showAvatar:f===0||i.data[f-1].senderId!==y.senderId,actions:[{label:"Reply",handler:()=>console.log("Reply clicked")},{label:"Forward",handler:()=>console.log("Forward clicked")}],class:X(f===0||i.data[f-1].senderId!==y.senderId?"mt-4":"mt-1")},null,8,["detail","showAvatar","actions","class"]))),128))]))),128))])),e(t).form.files.length===0?(a(),D(e(A),{key:2})):g("",!0)],4),e(t).form.files.length===0&&!e(t).isSelected?(a(),c("div",{key:0,class:"relative p-4 bg-white shadow-md dark:bg-zinc-800 border-t dark:border-t-zinc-700",style:E({minHeight:`${e(H).inputWrapperHeight}px`})},[s("div",re,[e(t).data.replyData?(a(),c("div",le,[s("div",ie,[n(x,{class:"rounded-lg"},{default:p(()=>[s("h5",ce,b(e(t).data.replyData.senderName),1),s("p",{class:"line-clamp-1 text-sm text-zinc-500 dark:text-zinc-200 font-normal",innerHTML:e(t).data.replyData.content},null,8,de)]),_:1})]),n(k,{onClick:o[0]||(o[0]=i=>e(t).data.replyData=null),class:"w-10 h-10 !rounded-full text-zinc-500 hover:!bg-zinc-100 flex items-center justify-center mb-1 dark:hover:!text-zinc-300 dark:hover:!bg-zinc-600"},{default:p(()=>o[4]||(o[4]=[s("i",{class:"fa-solid fa-xmark text-xl"},null,-1)])),_:1})])):g("",!0),s("div",ue,[n(e(L),{class:"hidden lg:flex"}),n(e(T))]),s("div",_e,[s("div",me,[n(e(P),{modelValue:e(t).form.chat,"onUpdate:modelValue":o[1]||(o[1]=i=>e(t).form.chat=i),onSendMessage:e(t).clickSendButton},null,8,["modelValue","onSendMessage"])]),n(k,{size:"lg",onClick:o[2]||(o[2]=i=>e(t).clickSendButton(e(t).form.chat)),class:"!w-12 !h-12 !rounded-full bg-primary text-white flex items-center justify-center"},{default:p(()=>o[5]||(o[5]=[s("i",{class:"bi bi-send-fill rotate-45"},null,-1)])),_:1})])]),n(e(h))],4)):g("",!0),e(t).isSelected?(a(),c("div",fe,[n(e(_)),s("p",ge,b(e(t).getSelectedChatDetail.length>0?(z=e(t).getSelectedChatDetail[0].data)==null?void 0:z.length:0)+" selected ",1),n(k,{onClick:o[3]||(o[3]=i=>e(t).clickButtonForward()),class:"ms-auto"},{default:p(()=>o[6]||(o[6]=[s("i",{class:"fa-solid fa-share text-zinc-500 dark:text-zinc-400 text-lg"},null,-1)])),_:1})])):g("",!0)]),n(e(u))])}}};export{he as default};
